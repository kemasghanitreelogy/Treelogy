<div class="hero-slider swiper-wrapper">
  {% for block in section.blocks %}
    {% assign product = block.settings.product %}

    {% comment %} --- LOGIC: Handle Image and Alt Text based on Language --- {% endcomment %}
    {% if block.type == 'image_type_3' %}
      {% comment %} Logic for the new Image-Only block {% endcomment %}
      {% assign current_banner = block.settings.image_en %}
      {% assign current_alt_text = block.settings.alt_text_en %}

      {% if request.locale.iso_code == 'id' %}
        {% if block.settings.image_id != blank %}
          {% assign current_banner = block.settings.image_id %}
        {% endif %}
        {% if block.settings.alt_text_id != blank %}
          {% assign current_alt_text = block.settings.alt_text_id %}
        {% endif %}
      {% endif %}
      {% assign mobile_banner = current_banner %}
    {% else %}
      {% comment %} Logic for original blocks {% endcomment %}
      {% assign current_banner = block.settings.banner %}
      {% assign current_alt_text = block.settings.alt_text_en %}
      {% if request.locale.iso_code == 'id' and block.settings.alt_text_id != blank %}
        {% assign current_alt_text = block.settings.alt_text_id %}
      {% endif %}
      {% assign mobile_banner = block.settings.banner_mobile | default: block.settings.banner %}
    {% endif %}
    {% comment %} ------------------------------------------------ {% endcomment %}

    <div
      class="banner swiper-slide slider-type-{{ block.type }}"
      data-href="{{ product.url }}"
      data-swiper-autoplay="{{ section.settings.interval }}"
    >
      <img
        class="background background-{{ block.id }} desktop"
        width="auto"
        height="auto"
        decoding="async"
        src="{{ current_banner | image_url }}"
        alt="{{ current_alt_text | escape }}"
      >
      <img
        class="background mobile"
        width="auto"
        height="auto"
        decoding="async"
        src="{{ mobile_banner | image_url }}"
        alt="{{ current_alt_text | escape }}"
      >
      <div class="main-grid">
        <div class="content {{ block.type }}">
          {% if block.type == 'image_picker' %}
            {% render 'HeroBannerSliderType1', block: block, product: product %}
          {% elsif block.type == 'image_type_2' %}
            {% render 'HeroBannerSliderType2', block: block %}
          {% endif %}
          {% comment %} image_type_3 intentionally renders no content snippet {% endcomment %}
        </div>
      </div>
    </div>
  {% endfor %}
</div>

<div class="swiper-pagination"></div>

{% schema %}
{
  "name": "Hero Banner",
  "tag": "section",
  "class": "section jumbo-slider swiper",
  "settings": [
    {
      "type": "number",
      "id": "interval",
      "label": "Slider interval",
      "info": "Interval is in millisecond",
      "default": 6000
    }
  ],
  "blocks": [
    {
      "limit": 5,
      "type": "image_picker",
      "name": "Banner",
      "settings": [
        { "type": "text", "id": "title_one", "default": "Premium Organic", "label": "Title one" },
        { "type": "text", "id": "title_two", "default": "Moringa Oleifera", "label": "Title two" },
        { "id": "content", "type": "textarea", "label": "Content" },
        { "id": "product", "type": "product", "label": "Link to product" },
        { "type": "header", "content": "Banner" },
        { "type": "image_picker", "id": "banner", "label": "Background" },
        { "type": "image_picker", "id": "banner_mobile", "label": "Background mobile" },
        { "type": "text", "id": "alt_text_en", "label": "Alt Text (English)" },
        { "type": "text", "id": "alt_text_id", "label": "Alt Text (Bahasa Indonesia)" }
      ]
    },
    {
      "limit": 5,
      "type": "image_type_2",
      "name": "Banner Type 2",
      "settings": [
        { "type": "textarea", "id": "title_one", "default": "Premium Organic", "label": "Title" },
        { "type": "image_picker", "id": "bagde", "label": "Badge icon" },
        { "type": "textarea", "id": "bagde_desc", "default": "No extracts. No fillers.", "label": "Badge description" },
        { "id": "content", "type": "textarea", "label": "Footer content" },
        { "id": "content_mobile", "type": "textarea", "label": "Footer content mobile" },
        { "type": "header", "content": "Banner" },
        { "type": "image_picker", "id": "banner", "label": "Background" },
        { "type": "image_picker", "id": "banner_mobile", "label": "Background mobile" },
        { "type": "text", "id": "alt_text_en", "label": "Alt Text (English)" },
        { "type": "text", "id": "alt_text_id", "label": "Alt Text (Bahasa Indonesia)" }
      ]
    },
    {
      "limit": 5,
      "type": "image_type_3",
      "name": "Image Only (Bilingual)",
      "settings": [
        { "type": "header", "content": "English" },
        { "type": "image_picker", "id": "image_en", "label": "Image (EN)" },
        { "type": "text", "id": "alt_text_en", "label": "Alt Text (EN)" },
        { "type": "header", "content": "Indonesian" },
        { "type": "image_picker", "id": "image_id", "label": "Image (ID)" },
        { "type": "text", "id": "alt_text_id", "label": "Alt Text (ID)" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Heroo Slider"
    }
  ]
}
{% endschema %}