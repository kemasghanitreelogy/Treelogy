<div 
  id="text-plain-{{ section.id }}"
  class="wrapper text-plain-container" 
  style="
    margin-top: {{ section.settings.margin_top }}px; 
    margin-bottom: {{ section.settings.margin_bottom }}px; 
    color: {{ section.settings.text_color }};
    --padding-mobile: {{ section.settings.padding_horizontal }}px;
    --padding-tablet: {{ section.settings.padding_horizontal | times: 1.5 | round }}px;
    --padding-desktop: {{ section.settings.padding_horizontal | times: 2 | round }}px;
    --mobile-size-title: {{ section.settings.font_size }}px;
    --tablet-size-title: {{ section.settings.font_size | times: 1.15 | round }}px;
    --desktop-size-title: {{ section.settings.font_size | times: 1.3 | round }}px;
    --mobile-size-desc: {{ section.settings.font_size_desc }}px;
    --tablet-size-desc: {{ section.settings.font_size_desc | times: 1.15 | round }}px;
    --desktop-size-desc: {{ section.settings.font_size_desc | times: 1.3 | round }}px;
    --mobile-size-title-block: {{ section.settings.font_size_title_block }}px;
    --tablet-size-title-block: {{ section.settings.font_size_title_block | times: 1.1 | round }}px;
    --desktop-size-title-block: {{ section.settings.font_size_title_block | times: 1.2 | round }}px;
    --mobile-size-content-block: {{ section.settings.font_size_content_block }}px;
    --tablet-size-content-block: {{ section.settings.font_size_content_block | times: 1.1 | round }}px;
    --desktop-size-content-block: {{ section.settings.font_size_content_block | times: 1.15 | round }}px;
  "
>
  <div class="content">
    <div 
      class="inner content-container-text-plain text-align-{{ section.settings.text_alignment }}"
      style="flex-direction:{{ section.settings.desktop_layout }}"
    >
      <div class="title">
        {{ section.settings.title }}
      </div>
      {% if section.settings.description != blank %}
          <div class="description body-desk">
            {{ section.settings.description }}
          </div>
      {% endif %}
      {% if section.blocks.size > 0 %}
        <div class="text-blocks">
          {% for block in section.blocks %}
            <div class="text-block" {{ block.shopify_attributes }}>
              {% if block.settings.block_title != blank %}
                <div class="block-title">
                  {{ block.settings.block_title }}
                </div>
              {% endif %}
              {% if block.settings.block_content != blank %}
                <div class="block-content">
                  {{ block.settings.block_content }}
                </div>
              {% endif %}
            </div>
          {% endfor %}
        </div>
      {% endif %}
      
      {% if section.settings.button_label != blank %}
        {% render 'PrimaryButton',
          url: section.settings.button_url,
          title: section.settings.button_label,
          type: 'transparent'
        %}
      {% endif %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Text Plain",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "richtext",
      "id": "title",
      "label": "Title",
      "default": "<p>Title</p>"
    },
    {
      "type": "select",
      "id": "title_weight",
      "label": "Title Weight",
      "options": [
        {
          "value": "500",
          "label": "Medium"
        },
        {
          "value": "600",
          "label": "Semibold"
        },
        {
          "value": "700",
          "label": "Bold"
        },
        {
          "value": "800",
          "label": "Extrabold"
        }
      ],
      "default": "500"
    },
    {
      "type": "number",
      "id": "font_size",
      "label": "Title Font Size - Mobile (px)",
      "info": "Auto-scales: Tablet +15%, Desktop +30%",
      "default": 20
    },
    {
      "type": "number",
      "id": "font_size_desc",
      "label": "Description Font Size - Mobile (px)",
      "info": "Auto-scales: Tablet +15%, Desktop +30%",
      "default": 14
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description",
      "default": "<p>Description</p>"
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button label"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "Button url"
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_horizontal",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Horizontal Padding - Mobile",
      "info": "Auto-scales: Tablet +50%, Desktop +100%",
      "default": 24
    },
    {
      "type": "select",
      "id": "desktop_layout",
      "label": "Desktop Layout (>768px)",
      "options": [
        {
          "value": "column",
          "label": "Column"
        },
        {
          "value": "row",
          "label": "Row"
        },
        {
          "value": "row-reverse",
          "label": "Row Reverse"
        }
      ],
      "default": "row"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "margin_top",
      "min": 0,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Margin Top",
      "default": 0
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "min": 0,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Margin Bottom",
      "default": 0
    },
    {
      "type": "number",
      "id": "font_size_title_block",
      "label": "Block Title Font Size - Mobile (px)",
      "info": "Auto-scales: Tablet +10%, Desktop +20%",
      "default": 14
    },
    {
      "type": "number",
      "id": "font_size_content_block",
      "label": "Block Content Font Size - Mobile (px)",
      "info": "Auto-scales: Tablet +10%, Desktop +15%",
      "default": 14
    }
  ],
  "blocks": [
    {
      "type": "text_block",
      "name": "Text Block",
      "settings": [
        {
          "type": "richtext",
          "id": "block_title",
          "label": "Block Title",
          "default": "<p>Block Title</p>"
        },
        {
          "type": "richtext",
          "id": "block_content",
          "label": "Block Content",
          "default": "<p>Block content goes here</p>"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Text Plain",
      "blocks": [
        {
          "type": "text_block"
        }
      ]
    }
  ]
}
{% endschema %}

{% stylesheet %}
.text-plain-container {
  padding: 0 var(--padding-mobile);
}

.text-align-left {
  text-align: left;
}

.text-align-center {
  text-align: center;
}

.text-align-right {
  text-align: right;
}

.text-plain-container .title {
  margin-bottom: 10px;
  white-space: pre-line;
  line-height: 1.1;
  font-weight: var(--title-weight, 500);
}

/* Mobile font sizes - using CSS variables from inline style */
.text-plain-container .title p {
  font-size: var(--mobile-size-title);
}

.text-plain-container .description p {
  font-size: var(--mobile-size-desc);
}

.text-plain-container .block-title p {
  margin-bottom: 0rem;
  font-weight: 400;
  font-size: var(--mobile-size-title-block);
}

.text-plain-container .block-content {
  line-height: 1.6;
  font-weight: 300;
  font-size: var(--mobile-size-content-block);
}

/* Tablet breakpoint (768px - 1023px) */
@media screen and (min-width: 768px) {
  .text-plain-container {
    padding: 0 var(--padding-tablet);
  }
  
  .text-plain-container .title {
    margin-bottom: 0rem;
  }
  
  .content-container-text-plain {
    padding: 0 48px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  
  .content-container-text-plain .text-blocks {
    text-align: left;
    width: 50%;
  }
  
  .text-plain-container .title p {
    font-size: var(--tablet-size-title);
  }
  
  .text-plain-container .description p {
    font-size: var(--tablet-size-desc);
  }
  
  .text-plain-container .block-title p {
    font-size: var(--tablet-size-title-block);
  }
  
  .text-plain-container .block-content {
    font-size: var(--tablet-size-content-block);
  }
}

/* Desktop breakpoint (1024px+) */
@media screen and (min-width: 1024px) {
  .text-plain-container {
    padding: 0 var(--padding-desktop);
  }
  
  .text-plain-container .title p {
    font-size: var(--desktop-size-title);
  }
  
  .text-plain-container .description p {
    font-size: var(--desktop-size-desc);
  }
  
  .text-plain-container .block-title p {
    font-size: var(--desktop-size-title-block);
  }
  
  .text-plain-container .block-content {
    font-size: var(--desktop-size-content-block);
  }
}
{% endstylesheet %}

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const section = document.querySelector('#text-plain-{{ section.id }}');
    if (section) {
      const titles = section.querySelectorAll('.title');
      
      titles.forEach(function(element) {
        let html = element.innerHTML;
        html = html.replace(/\.\s+/g, '.\n');
        element.innerHTML = html;
      });
    }
  });
</script>